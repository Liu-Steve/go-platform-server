import{b as k,d as I,u as V,_ as z,w as C,a as N,l as P,E as $}from"./base-d54c500e.js";import{E as B,p as D,a as A,b as R,c as U}from"./index-b3ce23ef.js";import{E as j}from"./el-link-958ea2c5.js";import{w as L,E as T}from"./websocket-61590569.js";import{E as q}from"./el-input-cca062b7.js";/* empty css                */import{g as b,h as M,o as p,c,n as v,u as a,i as F,j as G,k as H,l as J,m as K,q as O,a as n,b as t,w as o,s as Q,t as m}from"./index-d96b52e2.js";import{E as W}from"./index-189be2a0.js";import"./index-23957321.js";const X=k({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:I(String),default:"solid"}}),Y=b({name:"ElDivider"}),Z=b({...Y,props:X,setup(_){const u=_,e=V("divider"),d=M(()=>e.cssVar({"border-style":u.borderStyle}));return(l,r)=>(p(),c("div",{class:v([a(e).b(),a(e).m(l.direction)]),style:H(a(d)),role:"separator"},[l.$slots.default&&l.direction!=="vertical"?(p(),c("div",{key:0,class:v([a(e).e("text"),a(e).is(l.contentPosition)])},[F(l.$slots,"default")],2)):G("v-if",!0)],6))}});var ee=z(Z,[["__file","/home/runner/work/element-plus/element-plus/packages/components/divider/src/divider.vue"]]);const te=C(ee);const oe={style:{"text-align":"center",margin:"0 20px"}},se=n("div",{style:{"margin-top":"150px"}},[n("div",{style:{"font-size":"25px","font-weight":"bold"}},"登录"),n("div",{style:{"font-size":"14px",color:"grey"}},"进入系统前请先输入用户名和密码进行登录")],-1),re={style:{"margin-top":"50px"}},le={style:{"margin-top":"40px"}},ae=n("span",{style:{color:"grey","font-size":"13px"}},"没有账号",-1),ge={__name:"LoginPage",setup(_){const u=J(),e=K({username:"",password:"",remembered:!1}),d=O();e.username=localStorage.getItem("username"),e.password=localStorage.getItem("password"),e.remembered=localStorage.getItem("remembered")=="true";const l=()=>{!e.username||!e.password?B.warning("请填写用户名和密码"):D("/api/user/login",{feature:e.username,password:e.password},r=>{W({title:"登陆成功",type:"success"}),e.remembered?(localStorage.setItem("username",e.username),localStorage.setItem("userid",r.result.user.id),localStorage.setItem("password",e.password),localStorage.setItem("remembered","true")):(localStorage.setItem("username",""),localStorage.setItem("userid",""),localStorage.setItem("password",""),localStorage.setItem("remembered","false")),Q.defaults.headers.common.Authorization=`Bearer ${r.result.token}`,localStorage.setItem("Authorization",r.result.token),d.userid=r.result.user.id,d.username=e.username;let s="wss://dragondj.space/ws?Authorization="+r.result.token;d.ws_state=!0,L(s),u.push("/homepage")})};return(r,s)=>{const f=$,g=q,h=T,y=U,x=j,S=A,w=R,E=te;return p(),c("div",oe,[se,n("div",re,[t(g,{modelValue:e.username,"onUpdate:modelValue":s[0]||(s[0]=i=>e.username=i),type:"text",placeholder:"用户名/邮箱"},{prefix:o(()=>[t(f,null,{default:o(()=>[t(a(N))]),_:1})]),_:1},8,["modelValue"]),t(g,{modelValue:e.password,"onUpdate:modelValue":s[1]||(s[1]=i=>e.password=i),type:"password",style:{"margin-top":"10px"},placeholder:"密码"},{prefix:o(()=>[t(f,null,{default:o(()=>[t(a(P))]),_:1})]),_:1},8,["modelValue"])]),t(S,{style:{"margin-top":"5px"}},{default:o(()=>[t(y,{span:12,style:{"text-align":"left"}},{default:o(()=>[t(h,{modelValue:e.remembered,"onUpdate:modelValue":s[2]||(s[2]=i=>e.remembered=i),label:"记住我",size:"large"},null,8,["modelValue"])]),_:1}),t(y,{span:12,style:{"text-align":"right"}},{default:o(()=>[t(x,null,{default:o(()=>[m("忘记密码？")]),_:1})]),_:1})]),_:1}),n("div",le,[t(w,{onClick:l,style:{width:"270px"},type:"success",plain:""},{default:o(()=>[m("立即登录")]),_:1})]),t(E,null,{default:o(()=>[ae]),_:1}),n("div",null,[t(w,{onClick:s[3]||(s[3]=i=>r.$router.push("register")),style:{width:"270px"},type:"warning",plain:""},{default:o(()=>[m(" 注册账号 ")]),_:1})])])}}};export{ge as default};
